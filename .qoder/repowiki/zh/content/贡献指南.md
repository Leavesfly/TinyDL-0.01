# 贡献指南

<cite>
**本文档引用的文件**
- [README.md](file://README.md)
- [pom.xml](file://pom.xml)
- [TestFunc.java](file://src/test/java/io/leavesfly/tinydl/test/TestFunc.java)
- [TestNdArray.java](file://src/test/java/io/leavesfly/tinydl/test/TestNdArray.java)
- [Variable.java](file://src/main/java/io/leavesfly/tinydl/func/Variable.java)
- [Uml.java](file://src/main/java/io/leavesfly/tinydl/utils/Uml.java)
- [Plot.java](file://src/main/java/io/leavesfly/tinydl/utils/Plot.java)
</cite>

## 目录
1. [简介](#简介)
2. [贡献流程](#贡献流程)
3. [代码风格要求](#代码风格要求)
4. [测试策略与单元测试](#测试策略与单元测试)
5. [功能讨论与Issue使用](#功能讨论与issue使用)
6. [开发与构建](#开发与构建)
7. [示例参考](#示例参考)
8. [总结](#总结)

## 简介
欢迎为 TinyDL 项目贡献代码！TinyDL 是一个用 Java 实现的轻量级深度学习框架，旨在提供清晰、简洁的核心功能实现，适合学习深度学习原理和进行小规模实验。本指南将详细介绍如何为项目贡献代码，包括完整的贡献流程、代码风格规范、测试要求以及社区协作建议。

**Section sources**
- [README.md](file://README.md#L1-L20)

## 贡献流程
为确保代码质量和协作效率，我们制定了标准化的贡献流程。请遵循以下步骤进行贡献：

1. **Fork 仓库**：首先在 GitHub 上 Fork 本仓库到您的个人账户。
2. **克隆项目**：将您 Fork 的仓库克隆到本地。
   ```bash
   git clone https://github.com/your-username/TinyDL.git
   ```
3. **创建特性分支**：基于 `main` 分支创建一个新的特性分支，命名格式为 `feature/AmazingFeature`。
   ```bash
   git checkout -b feature/AmazingFeature
   ```
4. **编写代码**：在新分支上实现您的功能或修复。
5. **提交更改**：提交代码时，请使用清晰、规范的 commit message，描述更改内容。
   ```bash
   git commit -m 'Add some AmazingFeature'
   ```
6. **推送分支**：将本地分支推送到您的远程仓库。
   ```bash
   git push origin feature/AmazingFeature
   ```
7. **创建 Pull Request**：在 GitHub 上打开 Pull Request (PR)，目标为原仓库的 `main` 分支。请在 PR 描述中详细说明更改内容、动机和测试情况。

**Section sources**
- [README.md](file://README.md#L190-L195)

## 代码风格要求
为保持代码一致性，所有贡献必须遵循以下代码风格规范：

- **Java 命名规范**：
  - 类名使用大驼峰命名法（如 `MlpBlock`）。
  - 方法名和变量名使用小驼峰命名法（如 `addVariable`）。
  - 常量名使用全大写加下划线（如 `MAX_ITERATIONS`）。
- **代码注释**：
  - 所有公共类、方法和复杂逻辑必须添加 Javadoc 注释。
  - 注释应清晰描述功能、参数、返回值和异常。
  - 示例：
    ```java
    /**
     * 计算两个变量的加法
     * @param other 另一个变量
     * @return 加法结果变量
     */
    public Variable add(Variable other) {
        Function function = new Add();
        return function.call(this, other);
    }
    ```
- **代码结构**：
  - 保持方法简洁，单一职责。
  - 避免过长的类或方法，必要时进行拆分。

**Section sources**
- [Variable.java](file://src/main/java/io/leavesfly/tinydl/func/Variable.java#L179-L230)
- [Uml.java](file://src/main/java/io/leavesfly/tinydl/utils/Uml.java#L0-L45)

## 测试策略与单元测试
TinyDL 使用 JUnit 作为单元测试框架，确保代码的正确性和稳定性。贡献者必须为新功能编写相应的单元测试。

- **测试位置**：所有测试文件位于 `src/test/java/io/leavesfly/tinydl/test/` 目录下。
- **编写测试**：
  - 为每个新功能或修复创建对应的测试类。
  - 使用 `@Test` 注解标记测试方法。
  - 确保测试覆盖正常路径和边界情况。
- **运行测试**：
  使用 Maven 命令运行所有测试：
  ```bash
  mvn test
  ```
- **测试示例**：
  ```java
  public class TestFunc {
      @Test
      public void testAddition() {
          Variable x = new Variable(new NdArray(2.0f));
          Variable y = new Variable(new NdArray(3.0f));
          Variable z = x.add(y);
          assertEquals(5.0f, z.getValue().getNumber().floatValue(), 0.001f);
      }
  }
  ```

**Section sources**
- [pom.xml](file://pom.xml#L0-L29)
- [TestFunc.java](file://src/test/java/io/leavesfly/tinydl/test/TestFunc.java#L0-L50)
- [TestNdArray.java](file://src/test/java/io/leavesfly/tinydl/test/TestNdArray.java#L0-L97)

## 功能讨论与Issue使用
对于复杂功能或架构性更改，我们强烈建议在开始编码前先通过 Issue 进行讨论：

1. **创建 Issue**：在 GitHub 仓库中创建一个新的 Issue，详细描述您想实现的功能或解决的问题。
2. **讨论设计**：与维护者和其他贡献者讨论技术方案、API 设计和潜在影响。
3. **获得反馈**：根据社区反馈调整设计，确保方案符合项目方向。
4. **开始开发**：在达成共识后，再创建分支进行开发。

此流程有助于避免重复工作，确保新功能与项目整体架构协调一致。

**Section sources**
- [README.md](file://README.md#L190-L195)

## 开发与构建
项目使用 Maven 进行依赖管理和构建。开发环境要求：

- Java 8 或更高版本
- Maven 3.6 或更高版本

常用构建命令：
```bash
# 编译项目
mvn clean compile

# 运行测试
mvn test

# 打包项目
mvn package
```

**Section sources**
- [pom.xml](file://pom.xml#L0-L29)
- [README.md](file://README.md#L170-L175)

## 示例参考
项目提供了丰富的示例代码，位于 `src/main/java/io/leavesfly/tinydl/example/` 目录下，包括：

- **分类任务**：`SpiralMlpExam.java`、`MnistMlpExam.java`
- **回归任务**：`LineExam.java`、`MlpSinExam.java`
- **序列预测**：`RnnCosExam.java`

这些示例展示了如何使用框架的核心功能，是学习和开发新功能的优秀参考。

**Section sources**
- [README.md](file://README.md#L130-L150)

## 总结
我们非常感谢您为 TinyDL 项目贡献代码。通过遵循本指南，您可以确保贡献的代码符合项目标准，提高合并效率。请记住，良好的代码风格、充分的测试和提前的沟通是成功贡献的关键。期待您的 Pull Request！

[无来源，本节为总结性内容]